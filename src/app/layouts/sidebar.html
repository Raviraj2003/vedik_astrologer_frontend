<style>
  /* ACTIVE LINK */
  a.active {
    background-color: #6c524dc4 !important;
    color: #ffffff !important;
    border-radius: 10px;
  }

  .sidebar ul.sub-menu li a.active {
    color: #ffffff !important;
  }

  /* HOVER */
  .sidebar a.group:hover,
  .sidebar button.nav-link:hover {
    background-color: rgba(99, 102, 241, 0.08);
    border-radius: 10px;
  }

  /* ICON HOVER */
  .sidebar .group:hover svg {
    color: #4f46e5;
  }

  /* 🔥 FORCE SIDEBAR LINKS TO FLEX (OVERRIDE THEME) */
  .sidebar .nav-link {
    display: flex !important;
    align-items: center !important;
    gap: 12px !important;

    padding-left: 12px !important;
    padding-right: 12px !important;

    grid-template-columns: unset !important;
  }

  /* ===============================
   🔥 NUCLEAR SIDEBAR RESET
   =============================== */

  /* =========================================================
   SIDEBAR – LAYOUT RESET (OVERRIDE THEME GRID)
   ========================================================= */

  .sidebar a,
  .sidebar button.nav-link {
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    gap: 12px !important;

    padding: 8px 12px !important;

    grid-template-columns: none !important;
    grid-auto-flow: unset !important;
  }

  /* Remove theme pseudo-elements */
  .sidebar a::before,
  .sidebar a::after,
  .sidebar button::before,
  .sidebar button::after {
    content: none !important;
    display: none !important;
  }

  /* =========================================================
   ICON NORMALIZATION
   ========================================================= */

  .sidebar icon-menu-dashboard,
  .sidebar icon-menu-users,
  .sidebar icon-menu-notes,
  .sidebar icon-menu-elements,
  .sidebar icon-menu-charts,
  .sidebar icon-clipboard-text {
    width: 20px !important;
    min-width: 20px !important;
    height: 20px !important;
    flex-shrink: 0 !important;
    color: #000000 !important; /* BLACK ICONS */
  }

  /* =========================================================
   TEXT STYLING (BLACK & BOLD)
   ========================================================= */

  .sidebar span {
    display: inline-flex !important;
    align-items: center !important;
    white-space: nowrap !important;
    margin: 0 !important;
    padding: 0 !important;

    color: #000000 !important; /* BLACK TEXT */
    font-weight: 700 !important;
  }

  /* Sub-menu text */
  .sidebar .sub-menu a {
    color: #000000 !important;
    font-weight: 600 !important;
  }

  /* =========================================================
   ACTIVE & HOVER STATES
   ========================================================= */

  /* Active link */
  .sidebar a.active {
    background-color: #6c524dc4 !important;
    border-radius: 10px !important;
  }

  .sidebar a.active span {
    color: #ffffff !important; /* white text on active */
    font-weight: 800 !important;
  }

  /* Hover background */
  .sidebar a.group:hover,
  .sidebar button.nav-link:hover {
    background-color: rgba(99, 102, 241, 0.08) !important;
    border-radius: 10px !important;
  }

  /* =========================================================
   SIDEBAR LOGO (CENTERED, NO EXTRA SPACE)
   ========================================================= */

  .sidebar .logo-wrapper {
    padding: 0 !important;
    margin: 0 !important;

    display: flex;
    justify-content: center;
    align-items: center;
  }

  .sidebar .main-logo {
    padding: 0 !important;
    margin: 0 !important;
    line-height: 0 !important;

    display: flex;
    justify-content: center;
    align-items: center;
  }

  .sidebar .sidebar-logo {
    display: block;
    margin: 0 !important;
    padding: 0 !important;

    height: 72px; /* ✅ FINAL SIZE */
    max-width: 200px;
    width: auto;

    object-fit: contain;
  }

  /* Mobile safety */
  @media (max-width: 768px) {
    .sidebar .sidebar-logo {
      height: 64px;
    }
  }

  .sidebar .sidebar-logo {
    filter: drop-shadow(0 2px 6px rgb(0, 0, 0));
  }

  .sidebar .nav-item {
    margin-bottom: 10px; /* 👈 small clean gap */
  }

  /* Slightly more gap before accordion content */
  .sidebar .accordion > button.nav-link {
    margin-bottom: 4px;
  }

  /* Optional: gap between submenu items */
  .sidebar .sub-menu li {
    margin-bottom: 4px;
  }

  /* Active sidebar item */
.sidebar .nav-link.active {
  background-color: #e8ddd7; /* light Vedik brown */
  color: #6c524d;
}

/* Dark mode active */
.dark .sidebar .nav-link.active {
  background-color: #3a2f28;
  color: #ffffff;
}
/* ================= SIDEBAR HOVER FIX ================= */

/* Normal state */
.sidebar .sidebar-link {
  background-color: transparent !important;
  color: inherit;
}

/* Hover state – LIGHT MODE */
.sidebar .sidebar-link:hover {
  background-color: #f3ece8 !important; /* light Vedik brown */
  color: #6c524d !important;
}

/* Active state – LIGHT MODE */
.sidebar .sidebar-link.active {
  background-color: #e8ddd7 !important;
  color: #6c524d !important;
}

/* Hover – DARK MODE */
.dark .sidebar .sidebar-link:hover {
  background-color: #2f261f !important;
  color: #ffffff !important;
}

/* Active – DARK MODE */
.dark .sidebar .sidebar-link.active {
  background-color: #3a2f28 !important;
  color: #ffffff !important;
}
/* ================= REMOVE WHITE OVERLAY ================= */

/* Kill template pseudo-element */
.sidebar .sidebar-link::before {
  content: none !important;
}

/* Normal */
.sidebar .sidebar-link {
  background: transparent !important;
}

/* Hover – Light mode */
.sidebar .sidebar-link:hover {
  background-color: #f3ece8 !important; /* light Vedik */
  color: #6c524d !important;
}

/* Active – Light mode */
.sidebar .sidebar-link.active {
  background-color: #e8ddd7 !important;
  color: #6c524d !important;
}

/* Hover – Dark mode */
.dark .sidebar .sidebar-link:hover {
  background-color: #2f261f !important;
  color: #ffffff !important;
}

/* Active – Dark mode */
.dark .sidebar .sidebar-link.active {
  background-color: #3a2f28 !important;
  color: #ffffff !important;
}

</style>

<div [ngClass]="{ 'dark text-white-dark': store.semidark }">
  <nav
    class="sidebar fixed bottom-0 top-0 z-50 h-full min-h-screen w-[260px] shadow-[5px_0_25px_0_rgba(94,92,154,0.1)] transition-all duration-300 bg-cover bg-center"
    style="background-image: url(&quot;/assets/images/auth/sidebar.jpg&quot;)"
  >
    <div class="h-full bg-white/30 dark:bg-[#0e1726]/80 backdrop-blur-sm">
      <!-- HEADER -->
      <div class="logo-wrapper">
        <a routerLink="/dashboard" class="main-logo">
          <img
            src="/assets/images/auth/vedik logo.png"
            alt="Vedik Astrologer"
            class="sidebar-logo"
          />
        </a>
      </div>

      <!-- MENU -->
      <ng-scrollbar class="relative !h-[calc(100vh-80px)]" appearance="compact">
        <ul class="p-4 space-y-1 font-semibold">
          <!-- DASHBOARD -->
          <li class="menu nav-item">
            <a
              routerLink="/dashboard"
              routerLinkActive="active"
              (click)="toggleMobileMenu()"
              class="nav-link group rounded-lg"
            >
              <icon-menu-dashboard />
              <span>{{ 'dashboard' | translate }}</span>
            </a>
          </li>

          <!-- BATCH MASTER -->
          <li class="accordion menu nav-item">
            <button
              type="button"
              class="nav-link group w-full flex items-center justify-between p-2 rounded-lg"
              [ngClass]="{ active: activeDropdown.includes('batch') }"
              (click)="toggleAccordion('batch')"
            >
              <div class="flex items-center">
                <icon-menu-users />
                <span class="ltr:pl-3">Batch Master</span>
              </div>
              <icon-caret-down />
            </button>

            <div
              [@slideDownUp]="!activeDropdown.includes('batch')"
              class="accordion-content"
            >
              <ul class="sub-menu pl-8 space-y-1">
                <li>
                  <a routerLink="/add-student" routerLinkActive="active"
                    >Add Student</a
                  >
                </li>
                <li>
                  <a routerLink="/create-batch" routerLinkActive="active"
                    >Create Batch</a
                  >
                </li>
                <li>
                  <a routerLink="/assign-batch" routerLinkActive="active"
                    >Assign Students</a
                  >
                </li>
                <li>
                  <a routerLink="/class-schedule" routerLinkActive="active"
                    >Class Schedule</a
                  >
                </li>
                <li>
                  <a routerLink="/assign-topic" routerLinkActive="active"
                    >Assign Topic</a
                  >
                </li>
              </ul>
            </div>
          </li>

          <!-- MEDIA MASTER -->
          <li class="accordion menu nav-item">
            <button
              type="button"
              class="nav-link group w-full flex items-center justify-between p-2 rounded-lg"
              [ngClass]="{ active: activeDropdown.includes('media-master') }"
              (click)="toggleAccordion('media-master')"
            >
              <div class="flex items-center">
                <icon-menu-dashboard />
                <span class="ltr:pl-3">Media Master</span>
              </div>
              <icon-caret-down />
            </button>

            <div
              [@slideDownUp]="!activeDropdown.includes('media-master')"
              class="accordion-content"
            >
              <ul class="sub-menu pl-8 space-y-1">
                <li>
                  <a routerLink="/add-media" routerLinkActive="active"
                    >Add Media</a
                  >
                </li>
                <li>
                  <a routerLink="/assign-media" routerLinkActive="active"
                    >Assign Media</a
                  >
                </li>
              </ul>
            </div>
          </li>

          <!-- SCHEDULE MASTER -->
          <li class="accordion menu nav-item">
            <button
              type="button"
              class="nav-link group w-full flex items-center justify-between p-2 rounded-lg"
              [ngClass]="{ active: activeDropdown.includes('shedules') }"
              (click)="toggleAccordion('shedules')"
            >
              <div class="flex items-center">
                <icon-menu-notes />
                <span class="ltr:pl-3">Schedules Master</span>
              </div>
              <icon-caret-down />
            </button>

            <div
              [@slideDownUp]="!activeDropdown.includes('shedules')"
              class="accordion-content"
            >
              <ul class="sub-menu pl-8 space-y-1">
                <li>
                  <a routerLink="/shedules" routerLinkActive="active"
                    >Add Slots</a
                  >
                </li>
                <li>
                  <a routerLink="/close-slots" routerLinkActive="active"
                    >Close Slots</a
                  >
                </li>
                <li>
                  <a
                    routerLink="/reshedul-appointment"
                    routerLinkActive="active"
                    >Reschedule Appointment</a
                  >
                </li>
              </ul>
            </div>
          </li>

          <!-- APPOINTMENT -->
          <li class="accordion menu nav-item">
            <button
              type="button"
              class="nav-link group w-full flex items-center justify-between p-2 rounded-lg"
              [ngClass]="{ active: activeDropdown.includes('add-appointment') }"
              (click)="toggleAccordion('add-appointment')"
            >
              <div class="flex items-center">
                <icon-menu-notes />
                <span class="ltr:pl-3">Appointment</span>
              </div>
              <icon-caret-down />
            </button>

            <div
              [@slideDownUp]="!activeDropdown.includes('add-appointment')"
              class="accordion-content"
            >
              <ul class="sub-menu pl-8">
                <li>
                  <a routerLink="/add-appointment" routerLinkActive="active"
                    >Add Appointment</a
                  >
                </li>
              </ul>
            </div>
          </li>

          <!-- OTHER SERVICES -->
          <li class="accordion menu nav-item">
            <button
              type="button"
              class="nav-link group w-full flex items-center justify-between p-2 rounded-lg"
              [ngClass]="{ active: activeDropdown.includes('other services') }"
              (click)="toggleAccordion('other services')"
            >
              <div class="flex items-center">
                <icon-menu-notes />
                <span class="ltr:pl-3">Other Services</span>
              </div>
              <icon-caret-down />
            </button>

            <div
              [@slideDownUp]="!activeDropdown.includes('other services')"
              class="accordion-content"
            >
              <ul class="sub-menu pl-8 space-y-1">
                <li>
                  <a routerLink="/add-services" routerLinkActive="active"
                    >Add Services</a
                  >
                </li>
                <li>
                  <a routerLink="/services-dashboard" routerLinkActive="active"
                    >Services Dashboard</a
                  >
                </li>
              </ul>
            </div>
          </li>
        </ul>
      </ng-scrollbar>
    </div>
  </nav>
</div>

<!-- 🎓 STUDENT SIDEBAR -->
<div *ngIf="role === 'STD'">
  <div [ngClass]="{ 'dark text-white-dark': store.semidark }">
    <nav
      class="sidebar fixed bottom-0 top-0 z-50 h-full min-h-screen w-[260px] shadow-[5px_0_25px_0_rgba(94,92,154,0.1)] transition-all duration-300"
    >
      <div class="h-full bg-white dark:bg-[#0e1726]">
        <!-- ================= HEADER ================= -->
        <div class="flex items-center justify-between px-4 py-3">
          <a routerLink="/" class="main-logo flex items-center gap-2">
            <div class="logo-wrapper">
              <a routerLink="/dashboard" class="main-logo">
                <img
                  src="/assets/images/auth/vedik logo.png"
                  alt="Vedik Astrologer"
                  class="sidebar-logo"
                />
              </a>
            </div>
          </a>

          <button
            class="collapse-icon flex h-8 w-8 items-center justify-center rounded-full transition hover:bg-gray-500/10 hover:text-primary dark:text-white-light dark:hover:bg-dark-light/10 rtl:rotate-180"
            (click)="storeData.dispatch({ type: 'toggleSidebar' })"
          >
            <icon-carets-down class="rotate-90" />
          </button>
        </div>

        <!-- ================= MENU ================= -->
        <ng-scrollbar
          class="relative !h-[calc(100vh-80px)]"
          appearance="compact"
        >
          <ul class="px-4 py-2 space-y-1 font-semibold">
            <!-- My Dashboard -->
            <li class="menu nav-item">
              <a
                routerLink="/student-dashboard"
                routerLinkActive="active"
                (click)="toggleMobileMenu()"
                style="
                  display: flex !important;
                  align-items: center !important;
                  justify-content: flex-start !important;
                  gap: 12px;
                  width: 100%;
                  padding: 10px 16px;
                  border-radius: 10px;
                "
                class="nav-link group transition-colors
       hover:bg-[#f3ece8] dark:hover:bg-[#2f261f]
       hover:text-[#6c524d]
       dark:hover:text-white"

              >
                <icon-menu-dashboard
                  style="
                    margin: 0 !important;
                    padding: 0 !important;
                    min-width: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                  "
                  class="group-hover:!text-primary"
                ></icon-menu-dashboard>

                <span
                  style="
                    margin: 0 !important;
                    padding: 0 !important;
                    white-space: nowrap;
                  "
                  class="text-black dark:text-[#506690] dark:group-hover:text-white-dark"
                >
                  My Dashboard
                </span>
              </a>
            </li>

            <!-- Student Details -->
            <li class="menu nav-item">
              <a
                routerLink="/student-details"
                routerLinkActive="active"
                (click)="toggleMobileMenu()"
                style="
                  display: flex !important;
                  align-items: center !important;
                  justify-content: flex-start !important;
                  gap: 12px;
                  width: 100%;
                  padding: 10px 16px;
                  border-radius: 10px;
                "
                class="nav-link group"
              >
                <icon-menu-charts
                  style="
                    margin: 0 !important;
                    padding: 0 !important;
                    min-width: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                  "
                  class="group-hover:!text-primary"
                ></icon-menu-charts>

                <span
                  style="
                    margin: 0 !important;
                    padding: 0 !important;
                    white-space: nowrap;
                  "
                  class="text-black dark:text-[#506690] dark:group-hover:text-white-dark"
                >
                  Student Details
                </span>
              </a>
            </li>

            <!-- Study Materials -->
            <li class="menu nav-item">
              <a
                routerLink="/student-study-materials"
                routerLinkActive="active"
                (click)="toggleMobileMenu()"
                style="
                  display: flex !important;
                  align-items: center !important;
                  justify-content: flex-start !important;
                  gap: 12px;
                  width: 100%;
                  padding: 10px 16px;
                  border-radius: 10px;
                "
                class="nav-link group"
              >
                <icon-menu-elements
                  style="
                    margin: 0 !important;
                    padding: 0 !important;
                    min-width: 20px;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                  "
                  class="group-hover:!text-primary"
                ></icon-menu-elements>

                <span
                  style="
                    margin: 0 !important;
                    padding: 0 !important;
                    white-space: nowrap;
                  "
                  class="text-black dark:text-[#506690] dark:group-hover:text-white-dark"
                >
                  Study Materials
                </span>
              </a>
            </li>
          </ul>
        </ng-scrollbar>
      </div>
    </nav>
  </div>
</div>
