<div class="p-6 bg-gray-50 min-h-screen">

  <!-- ================= HEADER ================= -->
  <div class="flex items-center justify-between mb-6">
    <h2 class="text-xl font-semibold text-gray-800">Batch Master</h2>

    <div class="flex items-center gap-3">
      <button
        class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg flex items-center gap-2"
        (click)="openAddBatch()"
      >
        <span class="text-lg">Ôºã</span> Add Batch
      </button>

      <div class="relative">
        <input
          type="text"
          placeholder="Search Batch"
          class="border border-gray-300 rounded-lg pl-4 pr-10 py-2 w-64
                 focus:outline-none focus:ring-2 focus:ring-blue-500"
          [(ngModel)]="searchText"
        />
        <span class="absolute right-3 top-2.5 text-gray-400">üîç</span>
      </div>
    </div>
  </div>

  <!-- ================= CARD ================= -->
  <div class="bg-white rounded-2xl shadow-md p-6">

    <div *ngIf="filteredBatchList.length > 0; else noBatch" class="overflow-x-auto">
      <table class="w-full text-sm text-left">
        <thead class="bg-gray-50 text-gray-600">
          <tr>
            <th class="px-4 py-3">Batch Name</th>
            <th class="px-4 py-3">Status</th>
          </tr>
        </thead>

        <tbody class="divide-y">
          <tr *ngFor="let batch of filteredBatchList" class="hover:bg-gray-50">
            <td class="px-4 py-3 font-medium">
              {{ batch.batch_name }}
            </td>
            <td class="px-4 py-3">
              <span
                class="px-3 py-1 rounded-full text-xs font-medium"
                [ngClass]="batch.is_active === 'Y'
                  ? 'bg-green-100 text-green-600'
                  : 'bg-red-100 text-red-600'"
              >
                {{ batch.is_active === 'Y' ? 'Active' : 'Inactive' }}
              </span>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <ng-template #noBatch>
      <div class="text-center py-10 text-gray-500">
        No batches found
      </div>
    </ng-template>

  </div>

  <!-- ================= ADD BATCH MODAL ================= -->
  <ngx-custom-modal #addBatchModal class="no-footer">
    <ng-template #modalHeader>
      <span class="text-lg font-semibold">Add Batch</span>
    </ng-template>

    <ng-template #modalBody>
      <form [formGroup]="batchForm" (ngSubmit)="saveBatch()" class="space-y-4">

        <input
          class="form-input w-full"
          placeholder="Batch Name"
          formControlName="batch_name"
        />

        <div
          class="text-red-500 text-sm"
          *ngIf="batchForm.get('batch_name')?.invalid
                 && batchForm.get('batch_name')?.touched"
        >
          Batch name is required
        </div>

        <div class="flex justify-end gap-3 pt-4 border-t">
          <button
            type="button"
            class="px-4 py-2 border rounded-lg text-gray-600"
            (click)="addBatchModal.close()"
          >
            Cancel
          </button>

          <button
            type="submit"
            class="bg-blue-600 hover:bg-blue-700 text-white px-5 py-2 rounded-lg"
            [disabled]="loading"
          >
            {{ loading ? 'Saving...' : 'Save Batch' }}
          </button>
        </div>
      </form>
    </ng-template>
  </ngx-custom-modal>

</div>
