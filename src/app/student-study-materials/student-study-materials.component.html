<div class="panel mt-4 px-4 sm:px-6">

  <!-- ================= HEADER ================= -->
  <div class="mb-4 flex items-center justify-between">
    <h5 class="text-base sm:text-lg font-semibold dark:text-white-light">
      ðŸ“š Study Materials / Notes
    </h5>

    <div *ngIf="isLoading" class="flex items-center text-sm text-gray-500">
      <svg
        class="animate-spin h-4 w-4 mr-2 text-primary"
        viewBox="0 0 24 24"
      >
        <circle class="opacity-25" cx="12" cy="12" r="10"
                stroke="currentColor" stroke-width="4"></circle>
        <path class="opacity-75" fill="currentColor"
              d="M4 12a8 8 0 018-8v4a4 4 0 00-4 4H4z"></path>
      </svg>
      Loading...
    </div>
  </div>

  <!-- ================= NO DATA ================= -->
  <div *ngIf="!isLoading && materials.length === 0"
       class="text-center py-6 text-gray-400 italic">
    No study materials published yet.
  </div>

  <!-- ================= MATERIAL CARDS ================= -->
  <div
    *ngIf="!isLoading && materials.length > 0"
    class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4"
  >

    <div
      *ngFor="let m of materials"
      class="bg-white dark:bg-gray-800
             border border-gray-200 dark:border-gray-700
             rounded-xl p-4 shadow-sm hover:shadow-md transition"
    >

      <!-- File Type Badge -->
      <div class="flex justify-between items-center mb-2">
        <span
          class="text-xs px-3 py-1 rounded-full font-semibold"
          [ngClass]="{
            'bg-red-100 text-red-600': getFileType(m.file_type) === 'PDF',
            'bg-blue-100 text-blue-600': getFileType(m.file_type) === 'IMAGE',
            'bg-green-100 text-green-600': getFileType(m.file_type) === 'VIDEO'
          }"
        >
          {{ getFileType(m.file_type) }}
        </span>

        <span class="text-xs text-gray-400">
          {{ m.created_at | date:'dd MMM yyyy' }}
        </span>
      </div>

      <!-- Title -->
      <h3 class="font-semibold text-gray-800 dark:text-white mb-1">
        {{ m.title }}
      </h3>

      <!-- Description -->
      <p class="text-sm text-gray-500 dark:text-gray-400 mb-3 line-clamp-3">
        {{ m.description }}
      </p>

      <!-- Actions -->
   <a
  [href]="'http://192.168.1.14:5000/' + m.file_path"
  target="_blank"
  rel="noopener"
  class="block text-center bg-[#a07f73] text-white py-2 rounded-md
         hover:bg-[#8f6f64] transition text-sm shadow-sm"
>
  View
</a>


    </div>

  </div>
</div>
