<div>
  <!-- Breadcrumb -->
  <ul class="mb-6 flex space-x-2 rtl:space-x-reverse text-sm">
    <li><a href="javascript:;" class="text-primary hover:underline">Dashboard</a></li>
    <li class="before:content-['/'] ltr:before:mr-2 rtl:before:ml-2 text-gray-600 dark:text-gray-400">
      <span>Schedules</span>
    </li>
  </ul>

  <div class="grid grid-cols-1 gap-6">
    <div class="panel rounded-lg p-4 sm:p-6 bg-white dark:bg-[#0f172a] text-primary dark:text-white-light shadow-sm">

      <!-- Header Controls -->
      <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
        <h5 class="text-lg font-semibold dark:text-white">Working Hours</h5>

        <div class="flex flex-wrap items-center gap-4">
          <!-- From Date -->
          <div>
            <label class="block text-xs font-semibold text-gray-600 dark:text-gray-300">From Date</label>
            <input
              type="date"
              [(ngModel)]="fromDate"
              class="mt-1 w-40 rounded-md border border-gray-300 bg-transparent p-2 text-sm dark:border-gray-600 dark:text-gray-100"
            />
          </div>

          <!-- To Date -->
          <div>
            <label class="block text-xs font-semibold text-gray-600 dark:text-gray-300">To Date</label>
            <input
              type="date"
              [(ngModel)]="toDate"
              class="mt-1 w-40 rounded-md border border-gray-300 bg-transparent p-2 text-sm dark:border-gray-600 dark:text-gray-100"
            />
          </div>

          <!-- Default Duration -->
          <div>
            <label class="block text-xs font-semibold text-gray-600 dark:text-gray-300">Default Duration (min)</label>
            <input
              type="number"
              [(ngModel)]="slotDuration"
              (change)="updateAllSlots()"
              min="5"
              step="5"
              class="mt-1 w-28 rounded-md border border-gray-300 bg-transparent p-2 text-sm dark:border-gray-600 dark:text-gray-100"
            />
          </div>

          <!-- Buffer -->
          <div>
            <label class="block text-xs font-semibold text-gray-600 dark:text-gray-300">Buffer (min)</label>
            <input
              type="number"
              [(ngModel)]="bufferTime"
              (change)="updateAllSlots()"
              min="0"
              step="5"
              class="mt-1 w-28 rounded-md border border-gray-300 bg-transparent p-2 text-sm dark:border-gray-600 dark:text-gray-100"
            />
          </div>
        </div>
      </div>

      <!-- Table -->
      <div class="overflow-x-auto mt-6">
        <table class="min-w-full border-collapse text-sm">
          <thead class="bg-gray-100 dark:bg-[#1e293b]">
            <tr class="text-left text-gray-700 dark:text-gray-300">
              <th class="p-3">Day</th>
              <th class="p-3">Start</th>
              <th class="p-3">End</th>
              <th class="p-3">Duration</th>
              <th class="p-3">Slots</th>
              <th class="p-3 text-center">Actions</th>
            </tr>
          </thead>

          <tbody>
            <tr *ngFor="let day of workingHours; let i = index" class="border-b border-gray-100 dark:border-gray-700">
              <td class="p-3 font-semibold text-gray-800 dark:text-gray-200">{{ day.day }}</td>
              <td class="p-3"><input type="time" [(ngModel)]="day.startTime" (change)="updateSlots(day)" class="w-28 border p-2 rounded-md dark:border-gray-600" /></td>
              <td class="p-3"><input type="time" [(ngModel)]="day.endTime" (change)="updateSlots(day)" class="w-28 border p-2 rounded-md dark:border-gray-600" /></td>

              <!-- Individual Duration -->
              <td class="p-3">
                <input
                  type="number"
                  [(ngModel)]="day.slotInterval"
                  (change)="updateSlots(day)"
                  min="5"
                  step="5"
                  class="w-20 border p-2 rounded-md dark:border-gray-600"
                />
              </td>

              <td class="p-3">
                <div class="flex flex-wrap gap-2">
                  <span *ngFor="let slot of day.slots" class="rounded-lg bg-primary/90 px-3 py-1 text-xs text-white dark:bg-primary/70">{{ slot }}</span>
                  <span *ngIf="day.slots.length === 0 && day.startTime && day.endTime" class="text-xs italic text-red-400">‚ö†Ô∏è No slots</span>
                </div>
              </td>

              <td class="p-3 text-center">
                <button (click)="clearDay(i)" class="mx-1 text-red-500 hover:scale-110 transition-transform">üóëÔ∏è</button>
                <button (click)="copyFromPrevious(i)" class="mx-1 text-primary hover:scale-110 transition-transform">üìã</button>
              </td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Footer -->
      <div class="mt-6 flex flex-col sm:flex-row justify-center gap-4">
        <button (click)="saveSchedule()" class="rounded-full bg-green-500 px-6 py-2 font-semibold text-white shadow hover:bg-green-600">
          üíæ Save
        </button>
        <button (click)="cancel()" class="rounded-full bg-sky-500 px-6 py-2 font-semibold text-white shadow hover:bg-sky-600">
          ‚úñ Cancel
        </button>
      </div>
    </div>
  </div>
</div>
