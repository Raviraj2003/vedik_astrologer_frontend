<div class="panel max-w-5xl mx-auto mt-6 p-6 bg-white dark:bg-gray-900 rounded-xl shadow">

  <!-- HEADER -->
  <h3 class="text-lg font-semibold mb-4 text-gray-800 dark:text-white">
    ğŸ“ Assign / Change Class Topics
  </h3>

  <!-- SUCCESS MESSAGE -->
<div
  *ngIf="successMsg"
  class="mb-4 p-3 rounded-lg bg-green-100 border border-green-300 text-green-800 text-sm whitespace-pre-line"
>
  {{ successMsg }}
</div>

<!-- ERROR MESSAGE -->
<div
  *ngIf="errorMsg"
  class="mb-4 p-3 rounded-lg bg-red-100 border border-red-300 text-red-800 text-sm"
>
  {{ errorMsg }}
</div>


  <!-- BATCH SELECT -->
  <div class="mb-4">
    <label class="block text-sm font-medium mb-1">
      Select Batch
    </label>

    <select
      [(ngModel)]="selectedBatchCode"
      (change)="onBatchChange()"
      class="w-full border rounded px-3 py-2 text-sm dark:bg-gray-800 dark:text-white"
    >
      <option value="">-- Select Batch --</option>
      <option *ngFor="let b of batches" [value]="b.batch_code">
        {{ b.batch_name }}  
      </option>
    </select>
  </div>

  <!-- LOADING -->
  <div *ngIf="isLoading" class="text-sm text-gray-400">
    Loading class slots...
  </div>

  <!-- CLASS LIST -->
  <div *ngIf="!isLoading && classes.length" class="space-y-4">

    <div
      *ngFor="let c of classes"
      class="border border-gray-200 dark:border-gray-700 rounded-lg p-4"
    >
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-3">

        <!-- LEFT -->
        <div>
          <div class="font-semibold text-gray-800 dark:text-white">
            ğŸ“… {{ c.class_date | date: "dd MMM yyyy" }}
          </div>
          <div class="text-xs text-gray-500">
            â° {{ c.start_time }} â€“ {{ c.end_time }}
          </div>
          <div class="text-sm text-gray-600 dark:text-gray-400">
            {{ c.class_name }}
          </div>
        </div>

        <!-- RIGHT -->
        <div class="flex-1 md:mx-4">
          <textarea
            [(ngModel)]="c.topic"
            rows="2"
            class="w-full border rounded px-3 py-2 text-sm dark:bg-gray-800 dark:text-white"
            placeholder="Enter topic"
          ></textarea>
        </div>

        <!-- ACTION -->
        <button
          (click)="updateTopic(c)"
          class="bg-[#8b6f63] hover:bg-[#7a5f54] text-white px-4 py-2 rounded text-sm transition"
        >
          Save
        </button>
      </div>
    </div>

  </div>

  <!-- NO DATA -->
  <div *ngIf="!isLoading && selectedBatchCode && !classes.length"
       class="text-center text-gray-400 italic mt-6">
    No classes found for this batch
  </div>
</div>
