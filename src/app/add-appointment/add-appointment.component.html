<div
  class="flex justify-center items-start p-6 bg-gray-50 dark:bg-gray-900 min-h-screen transition-all duration-300"
>
  <div
    class="bg-white dark:bg-gray-800 shadow-lg rounded-xl p-6 w-full max-w-3xl transition-all duration-300"
  >
    <h2 class="text-xl font-semibold text-gray-900 dark:text-gray-100 mb-4">
      Appointment Form
    </h2>

    <form [formGroup]="appointmentForm" class="space-y-4">
      <!-- Row 1 -->
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium">Name</label>
          <input type="text" formControlName="name"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
        <div>
          <label class="block text-sm font-medium">Email</label>
          <input type="email" formControlName="email"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
      </div>

      <!-- Row 2 -->
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium">Mobile Number</label>
          <input type="text" maxlength="10" formControlName="mobile_number"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
        <div>
          <label class="block text-sm font-medium">Gender</label>
          <div class="flex gap-3 mt-1">
            <label><input type="radio" formControlName="gender" value="Male" /> Male</label>
            <label><input type="radio" formControlName="gender" value="Female" /> Female</label>
          </div>
        </div>
      </div>

      <!-- Row 3 -->
      <div>
        <label class="block text-sm font-medium">Marital Status</label>
        <div class="flex flex-wrap gap-3 mt-1">
          <label><input type="radio" formControlName="marital_status" value="Unmarried" /> Unmarried</label>
          <label><input type="radio" formControlName="marital_status" value="Married" /> Married</label>
          <label><input type="radio" formControlName="marital_status" value="Divorced" /> Divorced</label>
          <label><input type="radio" formControlName="marital_status" value="Widow/Widower" /> Widow/Widower</label>
        </div>
      </div>

      <!-- Row 4 -->
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium">Are you one of the twins?</label>
          <div class="flex gap-3 mt-1">
            <label><input type="radio" formControlName="is_twins" [value]="true" /> Yes</label>
            <label><input type="radio" formControlName="is_twins" [value]="false" /> No</label>
          </div>
        </div>
        <div>
          <label class="block text-sm font-medium">Appointment Type</label>
          <div class="flex gap-3 mt-1">
            <label><input type="radio" formControlName="appointment_type" value="Online" /> Online</label>
            <label><input type="radio" formControlName="appointment_type" value="Offline" /> Offline</label>
          </div>
        </div>
      </div>

      <!-- Row 5 -->
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium">Date of Birth</label>
          <input type="date" formControlName="date_of_birth"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
        <div>
          <label class="block text-sm font-medium">Time of Birth</label>
          <input type="time" formControlName="time_of_birth"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
      </div>

      <!-- Row 6 -->
      <div class="grid grid-cols-3 gap-3">
        <div>
          <label class="block text-sm font-medium">Country</label>
          <input type="text" formControlName="country"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
        <div>
          <label class="block text-sm font-medium">State</label>
          <input type="text" formControlName="state"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
        <div>
          <label class="block text-sm font-medium">City</label>
          <input type="text" formControlName="city"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
      </div>

      <!-- Row 7 -->
      <div>
        <label class="block text-sm font-medium">Subjects</label>
        <div class="grid grid-cols-4 gap-2 mt-1 text-sm">
          <label *ngFor="let subj of ['Child Birth','Divorce','Joint property holder','None']">
            <input type="checkbox" (change)="toggleSubject(subj, $event)" /> {{ subj }}
          </label>
        </div>
      </div>

      <!-- Partner Modal -->
      <div *ngIf="showPartnerModal"
        class="fixed inset-0 bg-black/50 flex items-center justify-center z-50">
        <div class="bg-white dark:bg-gray-800 rounded-lg shadow-xl p-5 w-full max-w-2xl relative">
          <button (click)="closePartnerModal()" class="absolute top-2 right-3 text-gray-500 hover:text-gray-700 dark:text-gray-300">✕</button>
          <h3 class="text-lg font-semibold text-gray-800 dark:text-gray-200 mb-3">Partner Details</h3>

          <div class="grid grid-cols-2 gap-3">
            <div>
              <label class="block text-sm font-medium">Partner Name</label>
              <input type="text" formControlName="partner_name" placeholder="Enter partner name"
                class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
            </div>
            <div>
              <label class="block text-sm font-medium">Partner DOB</label>
              <input type="date" formControlName="partner_date_of_birth"
                class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
            </div>
          </div>

          <div class="grid grid-cols-2 gap-3 mt-3">
            <div>
              <label class="block text-sm font-medium">Partner TOB</label>
              <input type="time" formControlName="partner_time_of_birth"
                class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
            </div>
            <div>
              <label class="block text-sm font-medium">Partner Place of Birth</label>
              <input type="text" formControlName="partner_place_of_birth"
                placeholder="Enter partner place"
                class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
            </div>
          </div>

          <div class="flex justify-end mt-4">
            <button type="button" (click)="closePartnerModal()"
              class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-400">
              Done
            </button>
          </div>
        </div>
      </div>

      <!-- Row 8 -->
      <div>
        <label class="block text-sm font-medium">Source</label>
        <div class="flex flex-wrap gap-3 mt-1">
          <label><input type="radio" formControlName="source" value="Instagram" /> Instagram</label>
          <label><input type="radio" formControlName="source" value="Facebook" /> Facebook</label>
          <label><input type="radio" formControlName="source" value="Google" /> Google</label>
          <label><input type="radio" formControlName="source" value="Friend" /> Friend</label>
        </div>
      </div>

    

      <!-- Row 10 -->
      <div>
        <label class="block text-sm font-medium">पहिल्यांदा किंवा पुन्हा तपासणी आहे का?</label>
        <div class="flex gap-3 mt-1">
          <label><input type="radio" formControlName="appointment_status" value="First Time" /> First Time (पहिल्यांदा)</label>
          <label><input type="radio" formControlName="appointment_status" value="Repeat" /> Repeat (पुन्हा तपासणी)</label>
        </div>
      </div>

      <!-- Row 11 -->
      <div class="grid grid-cols-2 gap-3">
        <div>
          <label class="block text-sm font-medium">Transaction ID</label>
          <input type="text" formControlName="transaction_id"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
        <div>
          <label class="block text-sm font-medium">Appointment Date</label>
          <input type="date" formControlName="appointment_date" (change)="onDateChange($event)"
            class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white" />
        </div>
      </div>

      <!-- Row 12 -->
      <div>
        <label class="block text-sm font-medium">Slots</label>
        <select formControlName="slot_time"
          class="mt-1 w-full rounded-md border p-2 dark:bg-gray-700 dark:text-white">
          <option value="">Select Slot</option>
          <option *ngFor="let slot of slots" [value]="slot.slot_time" [disabled]="slot.is_booked"
            [ngClass]="{ 'text-gray-400': slot.is_booked, 'text-black dark:text-white': !slot.is_booked }">
            {{ formatTime(slot.slot_time) }}
            <span *ngIf="slot.is_booked"> (Booked)</span>
          </option>
        </select>
        <p *ngIf="slots.length === 0" class="text-xs text-red-500 mt-1">
          No available slots for this date.
        </p>
      </div>

      <!-- Submit -->
      <div class="flex justify-end pt-3">
        <button type="button" (click)="submitForm()"
          class="bg-blue-600 text-white px-5 py-2 rounded-lg hover:bg-blue-700 dark:bg-blue-500 dark:hover:bg-blue-400">
          Submit
        </button>
      </div>
    </form>
  </div>
</div>
