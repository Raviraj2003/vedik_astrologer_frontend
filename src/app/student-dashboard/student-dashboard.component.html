<div class="panel mt-4 px-2 sm:px-6">
  <!-- ================= HEADER ================= -->
  <div class="mb-4 flex items-center justify-between">
    <h5 class="text-base sm:text-lg font-semibold dark:text-white-light">
      ğŸ“š My Class Schedule
    </h5>

    <span *ngIf="isLoading" class="text-sm text-gray-400"> Loading... </span>
  </div>

  <!-- ================= TABS ================= -->
  <div class="flex flex-wrap gap-2 mb-4">
    <button
      *ngFor="let tab of tabs"
      (click)="setActiveTab(tab)"
      [ngClass]="{
        'bg-primary text-white': activeTab === tab,
        'bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300':
          activeTab !== tab,
      }"
      class="px-4 py-1.5 rounded-md text-sm transition"
    >
      {{ getTabLabel(tab) }}
    </button>
  </div>

  <!-- ================= DATE-WISE CARD GRID ================= -->
  <ng-container *ngIf="groupedSchedules.length; else noData">
    <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5">
      <!-- ================= DATE CARD ================= -->
      <div
        *ngFor="let group of groupedSchedules"
        class="bg-white dark:bg-gray-900 border border-gray-200 dark:border-gray-700 rounded-xl shadow-sm p-4"
      >
        <!-- DATE + DAY HEADER -->
        <div class="mb-4 text-center">
          <h6 class="text-primary font-semibold text-sm">
            ğŸ“… {{ group.date | date: "dd MMM yyyy" }}
          </h6>
          <div class="text-xs text-gray-500 dark:text-gray-400">
            {{ group.classes[0].day_name }}
          </div>
        </div>
        
        <!-- ================= CLASSES INSIDE DATE ================= -->
        <div class="space-y-3">
          <!-- CLASS CARD -->
          <div
            *ngFor="let s of group.classes"
            class="border border-gray-200 dark:border-gray-700 rounded-lg p-3 hover:shadow transition"
          >
            <div class="flex justify-between items-start">
              <div>
                <h4 class="font-semibold text-gray-800 dark:text-white">
                  {{ s.class_name }}
                </h4>
                <p class="text-xs text-gray-500 dark:text-gray-400">
                  ğŸ“˜ {{ s.topic }}
                </p>
              </div>

              <!-- DAY BADGE -->
              <span
                class="text-xs px-2 py-0.5 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"
              >
                {{ s.day_name }}
              </span>
            </div>

            <div class="mt-2 text-sm text-gray-700 dark:text-gray-300">
              â° {{ s.start_time }} â€“ {{ s.end_time }}
            </div>

            <button
              routerLink="/student-study-materials"
              class="mt-3 w-full bg-primary text-white py-1.5 rounded-md text-sm hover:opacity-90 transition"
            >
              View Study Materials
            </button>
          </div>
          <!-- END CLASS CARD -->
        </div>
      </div>
      <!-- ================= END DATE CARD ================= -->
    </div>
  </ng-container>

  <!-- ================= NO DATA ================= -->
  <ng-template #noData>
    <div class="text-center py-6 italic text-gray-400 dark:text-gray-500">
      No classes found
    </div>
  </ng-template>
</div>
